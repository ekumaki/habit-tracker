# **習慣トラッカー PWA アプリケーション仕様書（最終版）**

## **1\. 概要**

本アプリケーションは、ユーザーが習慣にしたい行動を登録し、日々の達成・未達成を簡単に記録・確認できるシンプルなProgressive Web App (PWA)である。ログイン機能は不要とし、データはブラウザ内の**IndexedDB**に保存される。

## **2\. 要件定義**

### **2.1. 基本要件**

| ID | 機能 | 詳細 | 備考 |
| :---- | :---- | :---- | :---- |
| R01 | 習慣登録 | 習慣名（テキスト）を登録できる。 |  |
| R02 | 日次記録 | 登録した習慣について、その日の達成/未達成をチェック形式で記録できる。 |  |
| R03 | 習慣の編集・削除 | 登録済みの習慣名編集、削除機能。 | 削除時、過去の記録も同時に削除される。 |
| R04 | カレンダー表示（週） | 週間カレンダー形式で、達成状況を一覧できる。（基本表示） |  |
| R05 | カレンダー表示（月） | 月間カレンダー形式で、1ヶ月間の達成状況を一覧できる。 | 週表示からの切り替え。 |
| R06 | ストリーク表示 | 習慣ごとに連続達成日数を表示する。 |  |
| R07 | 習慣の並び替え | 習慣リストの表示順を、ユーザーが自由に並び替えられる。 | 初期は登録順。 |

### **2.2. 非機能要件**

| ID | 要件 | 詳細 |
| :---- | :---- | :---- |
| N01 | PWA対応 | Webアプリとして動作し、オフラインアクセス、ホーム画面への追加に対応する。 |
| N02 | 認証 | ログイン機能は不要。 |
| N03 | データ永続性 | データはブラウザの**IndexedDB**に保存する。非同期処理によりパフォーマンスを維持する。 |
| N04 | レスポンシブデザイン | モバイルファーストとし、画面サイズはスマートフォンサイズ（最大幅640px程度）に最適化し、PC表示時も同様の固定幅表示とする。 |

## **3\. 機能詳細**

### **3.1. 習慣の記録形式 (R02)**

* **形式:** チェックボックス。

### **3.2. カレンダー表示の視覚化ロジック (R04, R05)**

カレンダーの日付セルには、その日の登録されている**全習慣**に対する総合的な達成度に応じて以下のシンボルを表示する。

| シンボル | 達成度（ロジック） | 意味 |
| :---- | :---- | :---- |
| **二重丸** (◎) | 達成率 100% | その日に登録されている**全ての習慣**を達成。 |
| **三角** (△) | 達成率 1% 〜 99% | **1つでも**未達成の習慣が残っている。 |
| **バツ** (×) | 達成率 0% | その日に登録されている**全ての習慣**が未達成。 |
| **空白** | 記録なし | その日の記録がまだ入力されていない。 |

### **3.3. データ保存：IndexedDB**

データは以下の2つのオブジェクトストア（テーブルに相当）に格納する。

| オブジェクトストア名 | 格納内容 | 主キー |
| :---- | :---- | :---- |
| habits | 登録された習慣の情報 (ID, 名前, 並び順) | id (習慣ID) |
| records | 日々の達成記録 (習慣ID, 日付, 達成状態) | date\_habitId (複合キー) |

